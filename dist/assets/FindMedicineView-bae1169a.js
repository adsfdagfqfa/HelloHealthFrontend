import{_ as V,f as m,i as D,r,o as C,c as k,b as e,w as t,a as s,h as n,B as P,t as M}from"./index-96eb2e51.js";import{S as z}from"./StarMedicineButton-79b8f178.js";import"./global-65bc9685.js";const B="/static/FindMedicine.png";const S=m(0),T=m(0),F=m(0),U=m(0),E=m(0),K={name:"FindMedicineView",components:{StarMedicineButton:z},data(){return{currentPage:1,itemsPerPage:5,category:S,brand:T,form:F,insurance:U,recipe:E,search_value:"",constData:[],tableData:[],medicine:[{id:"medicine_id",label:"批准文号",content:null,span:1},{id:"medicine_ch_name",label:"中文名称",content:null,span:1},{id:"medicine_en_name",label:"英文名称",content:null,span:1},{id:"medicine_category",label:"分类",content:null,span:1},{id:"medicine_abbreviation",label:"简称",content:null,span:1},{id:"medicine_introduction",label:"简介",content:null,span:1},{id:"medicine_country",label:"来源",content:null,span:1},{id:"medicine_manufacturer",label:"生产厂商",content:null,span:1},{id:"medicine_form",label:"剂型",content:null,span:1},{id:"medicine_character",label:"药品性状",content:null,span:1},{id:"medicine_ingredient",label:"药品成分",content:null,span:1},{id:"medicine_validityperiod",label:"有效期",content:null,span:1},{id:"medicine_usage",label:"用法",content:null,span:1},{id:"medicine_indications",label:"适应症",content:null,span:1},{id:"medicine_taboo",label:"禁忌",content:null,span:1},{id:"medicine_storage",label:"贮藏方法",content:null,span:1},{id:"is_prescription_medicine",label:"是否为处方药",content:null,span:1},{id:"is_medical_insurance_medicine",label:"是否为医保药",content:null,span:1},{id:"medicine_image",label:"图片",content:null,span:1},{id:"medicine_reference_quote",label:"参考报价",content:null,span:1}]}},mounted(){D.get("api/Medicine/medicineList").then(l=>{l.data.errorCode===200?(this.tableData=l.data.data.medicine_list,this.constData=l.data.data.medicine_list,console.log(l.data.data.medicine_list)):console.error("Error fetching medicine data:",l.data.errorCode)}).catch(l=>{console.error(l)}),console.log(this.tableData)},methods:{handleEnterKey(){console.log("Enter key pressed"),this.medicineSearch()},medicineSearch(){if(console.log("Filtered Table Data:",this.tableData),this.tableData){const l=this.constData.filter(a=>this.search_value!==""?!!a.medicine_ch_name.includes(this.search_value):!0);console.log("Filtered Data:",l),this.tableData=l}return[]},CardButtonClicked(l){const a=l.medicine_id;this.$router.push(`/medicineCard?medicine_id=${a}`)},sizeChange(l){this.itemsPerPage=l},currentChange(l){this.currentPage=l}},computed:{filteredTableData(){return this.tableData?this.tableData.filter(a=>{if(this.category!==0)switch(this.category){case 1:if(a.medicine_category!=="西药")return!1;break;case 2:if(a.medicine_category!=="中药")return!1;break;case 3:if(a.medicine_category!=="保健品")return!1;break}if(this.form!==0)switch(this.form){case 1:if(a.medicine_form!=="注射剂")return!1;break;case 2:if(a.medicine_form!=="口服液体剂型")return!1;break;case 3:if(a.medicine_form!=="胶囊剂")return!1;break;case 4:if(a.medicine_form!=="片剂")return!1;break;case 5:if(a.medicine_form!=="颗粒剂")return!1;break;case 6:if(a.medicine_form!=="软膏剂")return!1;break}return!(this.insurance!==0&&a.is_medical_insurance_medicine!==(this.insurance===1?"是":"否")||this.recipe!==0&&a.is_prescription_medicine!==(this.recipe==1?"是":"否"))}):[]},totalPages(){return Math.ceil(this.filteredTableData.length/this.itemsPerPage)},paginatedTableData(){const l=(this.currentPage-1)*this.itemsPerPage,a=l+this.itemsPerPage;return this.filteredTableData.slice(l,a)}},watch:{search_value:{handler:"search",immediate:!0}}},H={class:"FM_body"},L=s("div",{class:"viewTitle tracking-in-expand",style:{"padding-top":"3px"}},"HH找药",-1),N={class:"filter-drug-box"},j=s("svg",{t:"1688614393322",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2387",width:"32",height:"32"},[s("path",{d:"M512 85.333c23.573 0 42.667 20.118 42.667 44.907v763.52c0 24.79-19.094 44.907-42.667 44.907s-42.667-20.118-42.667-44.907V130.24c0-24.79 19.094-44.907 42.667-44.907z","p-id":"2388",fill:"#6cb16a"})],-1),q=s("div",{style:{"padding-top":"3px"}},"找药结果",-1),I=s("img",{class:"img fade-in-fwd",style:{"margin-top":"10px"},alt:"",src:B},null,-1),A=["onClick"],G=s("div",{class:"icon"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[s("path",{fill:"none",d:"M0 0h24v24H0z"}),s("path",{fill:"currentColor",d:"M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"})])],-1),J={class:"pagination"};function O(l,a,Q,R,c,p){const u=r("el-row"),d=r("el-col"),i=r("el-radio"),f=r("el-radio-group"),b=r("el-card"),h=r("el-input"),g=r("StarMedicineButton"),_=r("el-table-column"),x=r("el-table"),w=r("el-tab-pane"),v=r("el-tabs"),y=r("el-pagination");return C(),k("div",H,[e(u,{class:"FM_title"},{default:t(()=>[L]),_:1}),s("div",N,[e(b,{class:"box-card"},{default:t(()=>[e(u,null,{default:t(()=>[e(d,{span:2,class:"text item"},{default:t(()=>[n("分类：")]),_:1}),e(d,{span:22,class:"text select-item"},{default:t(()=>[e(f,{modelValue:c.category,"onUpdate:modelValue":a[0]||(a[0]=o=>c.category=o)},{default:t(()=>[e(i,{label:0,class:"option-box"},{default:t(()=>[n("全部")]),_:1}),e(i,{label:1,class:"option-box"},{default:t(()=>[n("西药")]),_:1}),e(i,{label:2,class:"option-box"},{default:t(()=>[n("中药")]),_:1}),e(i,{label:3,class:"option-box"},{default:t(()=>[n("保健品")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(d,{span:2,class:"text item"},{default:t(()=>[n("剂型：")]),_:1}),e(d,{span:22,class:"text select-item"},{default:t(()=>[e(f,{modelValue:c.form,"onUpdate:modelValue":a[1]||(a[1]=o=>c.form=o)},{default:t(()=>[e(i,{label:0,class:"option-box"},{default:t(()=>[n("全部")]),_:1}),e(i,{label:1,class:"option-box"},{default:t(()=>[n("注射剂")]),_:1}),e(i,{label:2,class:"option-box"},{default:t(()=>[n("口服液体剂型")]),_:1}),e(i,{label:3,class:"option-box"},{default:t(()=>[n("胶囊剂")]),_:1}),e(i,{label:4,class:"option-box"},{default:t(()=>[n("片剂")]),_:1}),e(i,{label:5,class:"option-box"},{default:t(()=>[n("颗粒剂")]),_:1}),e(i,{label:6,class:"option-box"},{default:t(()=>[n("软膏剂")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(d,{span:2,class:"text item"},{default:t(()=>[n("医保药物：")]),_:1}),e(d,{span:22,class:"text select-item"},{default:t(()=>[e(f,{modelValue:c.insurance,"onUpdate:modelValue":a[2]||(a[2]=o=>c.insurance=o)},{default:t(()=>[e(i,{label:0,class:"option-box"},{default:t(()=>[n("全部")]),_:1}),e(i,{label:1,class:"option-box"},{default:t(()=>[n("医保药物")]),_:1}),e(i,{label:2,class:"option-box"},{default:t(()=>[n("非医保药物")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(d,{span:2,class:"text item"},{default:t(()=>[n("处方药物：")]),_:1}),e(d,{span:22,class:"text select-item"},{default:t(()=>[e(f,{modelValue:c.recipe,"onUpdate:modelValue":a[3]||(a[3]=o=>c.recipe=o)},{default:t(()=>[e(i,{label:0,class:"option-box"},{default:t(()=>[n("全部")]),_:1}),e(i,{label:1,class:"option-box"},{default:t(()=>[n("处方药物")]),_:1}),e(i,{label:2,class:"option-box"},{default:t(()=>[n("非处方药物")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),e(u,null,{default:t(()=>[e(d,{span:18},{default:t(()=>[e(u,{class:"FM_r_title"},{default:t(()=>[j,q]),_:1}),e(u,{class:"result_title"},{default:t(()=>[e(d,null,{default:t(()=>[e(h,{class:"search-box",modelValue:c.search_value,"onUpdate:modelValue":a[4]||(a[4]=o=>c.search_value=o),clearable:"",onKeyup:P(p.handleEnterKey,["enter","native"]),placeholder:"请输入药品中文名称","prefix-icon":l.Search},null,8,["modelValue","onKeyup","prefix-icon"])]),_:1}),e(d,{style:{"padding-top":"5px"}},{default:t(()=>[s("div",null,"查询结果共"+M(this.filteredTableData.length)+"条",1)]),_:1})]),_:1})]),_:1}),e(d,{span:6},{default:t(()=>[I]),_:1})]),_:1}),e(v,{type:"border-card",class:"result_title result_box"},{default:t(()=>[e(w,{label:"综合排序"},{default:t(()=>[e(x,{data:p.paginatedTableData,stripe:"",style:{width:"100%"}},{default:t(()=>[e(_,{label:"是否收藏",width:"60"},{default:t(o=>[e(g,{collected:o.row.isCollected,medicine_id:o.row.medicine_id},null,8,["collected","medicine_id"])]),_:1}),e(_,{prop:"medicine_ch_name",label:"药品名称",width:"200"}),e(_,{prop:"medicine_category",label:"类别",width:"100"}),e(_,{prop:"medicine_form",label:"剂型",width:"100"}),e(_,{prop:"medicine_indications",label:"适应症",width:"auto"}),e(_,{prop:"medicine_manufacturer",label:"生产厂商",width:"150"}),e(_,{prop:"operation",label:"操作",width:"150"},{default:t(({row:o})=>[s("button",{class:"cssbuttons-io-button",onClick:W=>p.CardButtonClicked(o)},[n(" 查看详情 "),G],8,A)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1}),s("div",J,[e(y,{background:"",onSizeChange:p.sizeChange,onCurrentChange:p.currentChange,"page-sizes":[5,10,15,20],"page-size":this.itemsPerPage,layout:"total, sizes, prev, pager, next, jumper",total:this.filteredTableData.length,modelValue:c.currentPage,"onUpdate:modelValue":a[5]||(a[5]=o=>c.currentPage=o)},null,8,["onSizeChange","onCurrentChange","page-size","total","modelValue"])])])}const $=V(K,[["render",O]]);export{$ as default};
