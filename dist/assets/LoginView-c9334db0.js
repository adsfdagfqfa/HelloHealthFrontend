import{_ as V,e as k,f as g,r as n,o as y,g as x,w as s,b as o,n as b,a as r,t as C,h as c,i as N,j as S,p as I,d as B}from"./index-96eb2e51.js";import{c as T}from"./changeTheme-5bb595fb.js";const H=i=>(I("data-v-bfe84433"),i=i(),B(),i),L=H(()=>r("div",{class:"titleWrapper"},[r("div",{class:"loginTitle"},"登录"),r("div",{class:"loginSubTitle"},"登录以继续")],-1)),E={class:"errorText"},U={class:"textButtonHolder"},j={class:"loginButtonHolder"},z={__name:"LoginView",setup(i){T("#93b27b");const t=k({phoneNumber:"",password:""}),a=g(""),l=g(!1),h=()=>{a.value="",l.value=!1;let _=/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;if(t.phoneNumber===""){a.value="请输入手机号！",l.value=!0;return}else if(!_.test(t.phoneNumber)){a.value="请输入正确的手机号！",l.value=!0;return}N.post("/loginService/user/login",t).then(e=>{localStorage.setItem("userId",e.data.data.userId),l.value=!1,a.value="",S.push("/")}).catch(e=>{if(console.log(e.response),!e.network)switch(e.errorCode){case 103:a.value="用户名或密码错误",l.value=!0;break;default:e.defaultHandler()}})},p=()=>{l.value=!1};return(_,e)=>{const m=n("el-input"),f=n("el-form-item"),u=n("el-button"),v=n("router-link"),w=n("el-form");return y(),x(w,{"label-position":"top","label-width":"60px",model:t,class:"loginForm"},{default:s(()=>[L,o(f,{label:"手机号",class:b({error:l.value})},{default:s(()=>[o(m,{modelValue:t.phoneNumber,"onUpdate:modelValue":e[0]||(e[0]=d=>t.phoneNumber=d),onClick:p,type:"number",step:"1",min:"0"},null,8,["modelValue"])]),_:1},8,["class"]),o(f,{label:"密码",class:b({error:l.value})},{default:s(()=>[o(m,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=d=>t.password=d),type:"password",onClick:p,"show-password":""},null,8,["modelValue"])]),_:1},8,["class"]),r("div",E,C(a.value),1),r("div",U,[o(v,{to:"/login/register"},{default:s(()=>[o(u,{type:"primary",link:""},{default:s(()=>[c("注册")]),_:1})]),_:1}),o(v,{to:"/login/forgot"},{default:s(()=>[o(u,{type:"primary",link:""},{default:s(()=>[c("忘记密码?")]),_:1})]),_:1})]),r("div",j,[o(u,{type:"primary",onClick:h},{default:s(()=>[c("登录")]),_:1})])]),_:1},8,["model"])}}},M=V(z,[["__scopeId","data-v-bfe84433"]]);export{M as default};
