import{B as w}from"./BackButton-ab4a2694.js";import{_ as g,e as I,f as u,i as h,E as f,r,o,c,a as n,b as _,F as k,l as B,t as b,w as y,p as V,d as x,h as S,W as E}from"./index-96eb2e51.js";import{g as $}from"./global-65bc9685.js";import{S as U}from"./StarMedicineButton-79b8f178.js";const D={name:"MedicineCard",components:{StarMedicineButton:U},setup(){const e=I([{id:"medicine_id",label:"批准文号",content:null,span:1},{id:"medicine_ch_name",label:"中文名称",content:null,span:1},{id:"medicine_en_name",label:"英文名称",content:null,span:1},{id:"medicine_category",label:"分类",content:null,span:1},{id:"medicine_abbreviation",label:"简称",content:null,span:1},{id:"medicine_introduction",label:"简介",content:null,span:1},{id:"medicine_country",label:"来源",content:null,span:1},{id:"medicine_manufacturer",label:"生产厂商",content:null,span:1},{id:"medicine_form",label:"剂型",content:null,span:1},{id:"medicine_character",label:"药品性状",content:null,span:1},{id:"medicine_ingredient",label:"药品成分",content:null,span:1},{id:"medicine_validityperiod",label:"有效期",content:null,span:1},{id:"medicine_usage",label:"用法",content:null,span:1},{id:"medicine_indications",label:"适应症",content:null,span:1},{id:"medicine_taboo",label:"禁忌",content:null,span:1},{id:"medicine_storage",label:"贮藏方法",content:null,span:1},{id:"is_prescription_medicine",label:"是否为处方药",content:null,span:1},{id:"is_medical_insurance_medicine",label:"是否为医保药",content:null,span:1},{id:"medicine_image",label:"图片",content:null,span:1},{id:"medicine_reference_quote",label:"参考报价(/元)",content:null,span:1},{id:"collect_memory",label:"药品收藏备注",content:null,span:1}]),t=u(null);t.value=e.find(l=>l.id==="medicine_id").content;const s=u(null),i=u(null);return{items:e,medicineId:t,isCollected:s,collectMemory:i}},created(){console.log("created"),this.getMedicineCard()},methods:{getMedicineCard(){const e=this.$route.query.medicine_id;console.log(e),e?h.post("/api/Medicine/medicineCard",{medicine_id:e}).then(t=>{const s=t.data;if(s.errorCode===200){const i=s.data;this.items.forEach(l=>{l.content=i[l.id]||"-"}),this.isCollected=i.isCollected,this.medicineId=e,this.collectMemory=i.collect_memory}else console.error("Error fetching medicine data:",s.errorCode)}).catch(t=>{console.error("Error fetching medicine data:",t)}):console.error("No medicine ID provided"),window.scrollTo(0,0)},Update(){if(!$.login){f.warning("请先登录！");return}console.log(this.medicineId),h.post("/api/Medicine/addCollection",{medicine_id:this.medicineId,memory:this.collectMemory}).then(e=>{this.isCollected=!0,f({message:"更新药品备注成功！",type:"success"})}).catch(e=>{if(e.network)return!1;switch(e.errorCode){default:e.defaultHandler("更新药品备注失败")}})}}},a=e=>(V("data-v-5c69d6f5"),e=e(),x(),e),F={class:"wrapper"},N=a(()=>n("div",{class:"circle-1"},null,-1)),q=a(()=>n("div",{class:"circle-2"},null,-1)),L={class:"circle-3"},T={class:"add-favorite-wrapper"},W={class:"AddCollection"},j={class:"card"},A=a(()=>n("section",{class:"top"},[n("span",{class:"u-l"},[n("i",{class:"fi fi-rr-capsules"}),S(" 药品基本信息 ")])],-1)),H={class:"bottom"},P={class:"properties"},z={class:"label"},G={class:"content"},J={key:0},K=["src"],O={key:1,class:"collectionMemory"},Q={key:0},R=a(()=>n("i",{class:"fi fi-rr-refresh"},"更新",-1)),X={key:1},Y=a(()=>n("strong",null," 您还没有收藏此药品！！",-1)),Z=[Y],ee={key:2};function ne(e,t,s,i,l,p){const m=r("StarMedicineButton"),v=r("el-button"),C=r("el-input");return o(),c("div",F,[N,q,n("div",L,[n("div",T,[n("span",W,[_(m,{collected:i.isCollected,medicine_id:e.$route.query.medicine_id,onFatherUpdate:p.getMedicineCard},null,8,["collected","medicine_id","onFatherUpdate"])])])]),n("div",j,[A,n("section",H,[n("ul",P,[(o(!0),c(k,null,B(i.items,d=>(o(),c("li",{class:"property",key:d.id},[n("span",z,b(d.label)+":",1),n("span",G,[d.id==="medicine_image"?(o(),c("div",J,[n("img",{src:d.content,style:{width:"100%",height:"100%","objec-fit":"cover"}},null,8,K)])):d.id==="collect_memory"?(o(),c("div",O,[i.isCollected?(o(),c("div",Q,[_(C,{modelValue:i.collectMemory,"onUpdate:modelValue":t[0]||(t[0]=M=>i.collectMemory=M),placeholder:"Please input",class:"input-with-select"},{append:y(()=>[_(v,{class:"updateButton",onClick:p.Update},{default:y(()=>[R]),_:1},8,["onClick"])]),_:1},8,["modelValue"])])):(o(),c("div",X,Z))])):(o(),c("span",ee,b(d.content||"-"),1))])]))),128))])])])])}const ie=g(D,[["render",ne],["__scopeId","data-v-5c69d6f5"]]);const te={name:"MedicineInformationView",components:{MedicineCard:ie,WebLoading:E,BackButton:w}},oe={class:"MedicineInformationView"};function ce(e,t,s,i,l,p){const m=r("MedicineCard");return o(),c("div",oe,[_(m)])}const re=g(te,[["render",ce],["__scopeId","data-v-7780202d"]]);export{re as default};
